{
    "openapi": "3.1.0",
    "info": {
        "title": "文档向量化服务",
        "description": "基于FastAPI的文档向量化和检索服务",
        "version": "1.0.0"
    },
    "paths": {
        "/": {
            "get": {
                "summary": "Root",
                "operationId": "root__get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/health": {
            "get": {
                "summary": "Health Check",
                "operationId": "health_check_health_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    }
                }
            }
        },
        "/index/{index_name}": {
            "put": {
                "summary": "Create Index",
                "description": "创建索引接口",
                "operationId": "create_index_index__index_name__put",
                "parameters": [
                    {
                        "name": "index_name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Index Name"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateIndexRequest"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CreateIndexResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/index/{index_name}/exists": {
            "get": {
                "summary": "Check Index Exists",
                "description": "检查索引是否存在",
                "operationId": "check_index_exists_index__index_name__exists_get",
                "parameters": [
                    {
                        "name": "index_name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Index Name"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IndexExistsResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/index/{index_name}/health": {
            "get": {
                "summary": "Check Index Health",
                "description": "检查索引健康状态",
                "operationId": "check_index_health_index__index_name__health_get",
                "parameters": [
                    {
                        "name": "index_name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Index Name"
                        }
                    },
                    {
                        "name": "vector_field",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "default": "content",
                            "title": "Vector Field"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/indices": {
            "get": {
                "summary": "List Indices",
                "description": "获取索引列表",
                "operationId": "list_indices_indices_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ListIndicesResponse"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/documents": {
            "post": {
                "summary": "Create Documents",
                "description": "批量创建文档接口",
                "operationId": "create_documents_documents_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CreateDocumentsRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CreateDocumentsResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/search": {
            "post": {
                "summary": "Search Documents",
                "description": "检索文档接口",
                "operationId": "search_documents_search_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/SearchRequest"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/SearchResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/index/{index_name}/clear": {
            "delete": {
                "summary": "Clear Index",
                "description": "清空指定索引的所有数据",
                "operationId": "clear_index_index__index_name__clear_delete",
                "parameters": [
                    {
                        "name": "index_name",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "title": "Index Name"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ClearIndexResponse"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "ClearIndexResponse": {
                "properties": {
                    "index": {
                        "type": "string",
                        "title": "Index",
                        "description": "索引名称"
                    },
                    "deleted_count": {
                        "type": "integer",
                        "title": "Deleted Count",
                        "description": "删除的文档数量"
                    },
                    "doc_count_before": {
                        "type": "integer",
                        "title": "Doc Count Before",
                        "description": "清空前的文档数量"
                    },
                    "success": {
                        "type": "boolean",
                        "title": "Success",
                        "description": "操作是否成功"
                    }
                },
                "type": "object",
                "required": [
                    "index",
                    "deleted_count",
                    "doc_count_before",
                    "success"
                ],
                "title": "ClearIndexResponse",
                "description": "清空索引响应模型"
            },
            "CreateDocumentsRequest": {
                "properties": {
                    "documents": {
                        "items": {
                            "type": "object"
                        },
                        "type": "array",
                        "title": "Documents",
                        "description": "文档数组"
                    },
                    "vector_field": {
                        "type": "string",
                        "title": "Vector Field",
                        "description": "需要向量化的字段名"
                    },
                    "index": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Index",
                        "description": "可选的索引名"
                    }
                },
                "type": "object",
                "required": [
                    "documents",
                    "vector_field"
                ],
                "title": "CreateDocumentsRequest",
                "description": "批量创建文档请求模型"
            },
            "CreateDocumentsResponse": {
                "properties": {
                    "index": {
                        "type": "string",
                        "title": "Index",
                        "description": "创建的索引名称"
                    },
                    "count": {
                        "type": "integer",
                        "title": "Count",
                        "description": "插入的文档数量"
                    }
                },
                "type": "object",
                "required": [
                    "index",
                    "count"
                ],
                "title": "CreateDocumentsResponse",
                "description": "批量创建文档响应模型"
            },
            "CreateIndexRequest": {
                "properties": {
                    "vector_field": {
                        "type": "string",
                        "title": "Vector Field",
                        "description": "向量字段名",
                        "default": "content"
                    },
                    "vector_dimension": {
                        "type": "integer",
                        "title": "Vector Dimension",
                        "description": "向量维度",
                        "default": 1024
                    },
                    "description": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Description",
                        "description": "索引描述"
                    }
                },
                "type": "object",
                "title": "CreateIndexRequest",
                "description": "创建索引请求模型"
            },
            "CreateIndexResponse": {
                "properties": {
                    "index": {
                        "type": "string",
                        "title": "Index",
                        "description": "索引名称"
                    },
                    "created": {
                        "type": "boolean",
                        "title": "Created",
                        "description": "是否新创建"
                    },
                    "vector_field": {
                        "type": "string",
                        "title": "Vector Field",
                        "description": "向量字段名"
                    },
                    "vector_dimension": {
                        "type": "integer",
                        "title": "Vector Dimension",
                        "description": "向量维度"
                    }
                },
                "type": "object",
                "required": [
                    "index",
                    "created",
                    "vector_field",
                    "vector_dimension"
                ],
                "title": "CreateIndexResponse",
                "description": "创建索引响应模型"
            },
            "HTTPValidationError": {
                "properties": {
                    "detail": {
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        },
                        "type": "array",
                        "title": "Detail"
                    }
                },
                "type": "object",
                "title": "HTTPValidationError"
            },
            "IndexExistsResponse": {
                "properties": {
                    "exists": {
                        "type": "boolean",
                        "title": "Exists",
                        "description": "索引是否存在"
                    },
                    "index": {
                        "type": "string",
                        "title": "Index",
                        "description": "索引名称"
                    },
                    "document_count": {
                        "anyOf": [
                            {
                                "type": "integer"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Document Count",
                        "description": "文档数量"
                    },
                    "vector_field": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Vector Field",
                        "description": "向量字段名"
                    },
                    "created_at": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Created At",
                        "description": "创建时间"
                    }
                },
                "type": "object",
                "required": [
                    "exists",
                    "index"
                ],
                "title": "IndexExistsResponse",
                "description": "索引存在性检查响应模型"
            },
            "IndexInfo": {
                "properties": {
                    "index": {
                        "type": "string",
                        "title": "Index",
                        "description": "索引名称"
                    },
                    "document_count": {
                        "type": "integer",
                        "title": "Document Count",
                        "description": "文档数量"
                    },
                    "vector_field": {
                        "type": "string",
                        "title": "Vector Field",
                        "description": "向量字段名"
                    },
                    "created_at": {
                        "anyOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }
                        ],
                        "title": "Created At",
                        "description": "创建时间"
                    }
                },
                "type": "object",
                "required": [
                    "index",
                    "document_count",
                    "vector_field"
                ],
                "title": "IndexInfo",
                "description": "索引信息模型"
            },
            "ListIndicesResponse": {
                "properties": {
                    "indices": {
                        "items": {
                            "$ref": "#/components/schemas/IndexInfo"
                        },
                        "type": "array",
                        "title": "Indices",
                        "description": "索引列表"
                    }
                },
                "type": "object",
                "required": [
                    "indices"
                ],
                "title": "ListIndicesResponse",
                "description": "索引列表响应模型"
            },
            "SearchRequest": {
                "properties": {
                    "query": {
                        "type": "string",
                        "title": "Query",
                        "description": "查询文本"
                    },
                    "vector_field": {
                        "type": "string",
                        "title": "Vector Field",
                        "description": "向量字段名"
                    },
                    "index": {
                        "type": "string",
                        "title": "Index",
                        "description": "目标索引名"
                    },
                    "top_k": {
                        "type": "integer",
                        "title": "Top K",
                        "description": "返回的结果数量",
                        "default": 5
                    }
                },
                "type": "object",
                "required": [
                    "query",
                    "vector_field",
                    "index"
                ],
                "title": "SearchRequest",
                "description": "搜索请求模型"
            },
            "SearchResponse": {
                "properties": {
                    "results": {
                        "items": {
                            "$ref": "#/components/schemas/SearchResult"
                        },
                        "type": "array",
                        "title": "Results",
                        "description": "匹配的文档列表"
                    },
                    "total": {
                        "type": "integer",
                        "title": "Total",
                        "description": "总结果数量"
                    },
                    "took": {
                        "type": "integer",
                        "title": "Took",
                        "description": "查询耗时(毫秒)"
                    }
                },
                "type": "object",
                "required": [
                    "results",
                    "total",
                    "took"
                ],
                "title": "SearchResponse",
                "description": "搜索响应模型"
            },
            "SearchResult": {
                "properties": {
                    "score": {
                        "type": "number",
                        "title": "Score",
                        "description": "相似度分数"
                    },
                    "document": {
                        "type": "object",
                        "title": "Document",
                        "description": "文档内容"
                    }
                },
                "type": "object",
                "required": [
                    "score",
                    "document"
                ],
                "title": "SearchResult",
                "description": "单个搜索结果"
            },
            "ValidationError": {
                "properties": {
                    "loc": {
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "integer"
                                }
                            ]
                        },
                        "type": "array",
                        "title": "Location"
                    },
                    "msg": {
                        "type": "string",
                        "title": "Message"
                    },
                    "type": {
                        "type": "string",
                        "title": "Error Type"
                    }
                },
                "type": "object",
                "required": [
                    "loc",
                    "msg",
                    "type"
                ],
                "title": "ValidationError"
            }
        }
    }
}